* npm init -y  --> create node modules
* npm install express cookie-parser mailtrap bcryptjs dotenv jsonwebtoken crypto // for express
* npm install nodemon -D
* npm install dotenv
* npm install fastify @fastify/jwt @fastify/cookie  bcryptjs @fastify/cors(optional)
    jwt: for JSON web tokens(for cross origin resource sharing)



----> structrue :
    src:
        * controllers
        * models
        * routes
        * db
        app.js
        .env
        .gitignore



-----> How to configure dotenv:
Location of .env	
* At project root	          ---->     dotenv.config();
* Inside backend/ folder	  ---->     dotenv.config({ path: './backend/.env' });



------> ğŸ”‘ Key point
Situation	Should you use async/await?  
Only sync calls (better-sqlite3, basic logic)	        âŒ No need for async.
Any async operation (bcrypt, fetch, external API)	  âœ… Yes, use async and await




-------> JWT(Json Web Token)
* ğŸ”‘ JWT = stateless authentication No need to store user sessions on the server; JWT contains all necessary data.
* Process overview
 ----(A) Signup
    User registers â” password is hashed â” saved in DB â” JWT is generated â” sent to user.
 ----(B) Login
    User submits email/password â” server verifies â” generates JWT â” sends to user.
 ----(C) Protected route
    User sends request with JWT â” server verifies token â” allows access.

* JWT_SECRET=pingpongsupersecretkey  --->   âœ”ï¸ Easy for local testing
                                    âŒ Not secure for production
* JWT_SECRET=9h9!$zO@7Qf3p#LmV2*Ejr&Bw^Ks6d4NxZ0t+1Yc8gHb5U
        ----->  âœ”ï¸ Hard to guess
                âœ”ï¸ Mix of uppercase, lowercase, numbers, symbols
* fastify.register(fastifyJwt, {secret: process.env.JWT_SECRET});
    ---> fastify.register(jwt, {...}) is registering the JWT plugin with Fastify.
    - Youâ€™re telling Fastify:
    â€œHey Fastify, use the fastify-jwt plugin, and here is my secret key for signing and verifying tokens.
* fastify.register(fastifyCookie);
    ----> Without registering fastify-cookie, you cannot use reply.setCookie() or read request.cookies



-------> order is important
fastify.register(fastifyJwt, { secret: process.env.JWT_SECRET });
fastify.register(fastifyCookie);

* fastify.register(routes, { prefix: '/backend' });
* fastifyJwt â” Adds fastify.jwt methods to your server instance
* fastifyCookie â” Adds request.cookies and reply.setCookie methods
* Routes â” Use these plugins, so they must be registered after the plugins






---------> nodemailer
âœ¨ ğŸ”‘ 1. What is email verification?
    âœ… Generate a unique verification token
    âœ… Send it to their email as a clickable verification link
    âœ… When they click it, mark their account as verified in your DB

âœ… 2. Install Nodemailer
    npm install nodemailer


ğŸ”§ 3. Setup Nodemailer transporter :  mailer.js
import nodemailer from 'nodemailer';

const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: process.env.EMAIL_USER, // your email
    pass: process.env.EMAIL_PASS  // app password or real password if local
  }
});

export default transporter;

ğŸ“ 4. Modify your users table
ALTER TABLE USERS ADD COLUMN isVerified INTEGER DEFAULT 0;
ALTER TABLE USERS ADD COLUMN verificationToken TEXT;

ğŸ”‘ 5. Generate a unique verification token


